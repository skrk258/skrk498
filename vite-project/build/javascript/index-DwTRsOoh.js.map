{"version":3,"file":"index-DwTRsOoh.js","sources":["../../index.js"],"sourcesContent":["import\"./main.scss\";\r\nimport BScroll from '@better-scroll/core'\r\nimport axios from 'axios'\r\n\r\n\r\n\r\n\r\nfunction renderList(list){\r\n    $(\".pros\").innerHTML = list.map( (pro,index) => {\r\n        return`\r\n            <div class=\"pro\" data_index = ${index}>\r\n                <div class=\"img\">\r\n                    <img src=${pro.img} alt=\"\">\r\n                </div>\r\n                <div class=\"text\">\r\n                    <h4>${pro.title}</h4>\r\n                    <div class=\"sales\">月销${pro.sold}箱</div>\r\n                    <div>￥${pro.price}</div>\r\n                </div>\r\n            </div>\r\n        `\r\n    } ).join(\"\")\r\n}\r\n\r\nasync function zh(){\r\n    const res = await axios.get('https://zyxcl.xyz/exam_api/zh')\r\n    localStorage.setItem('itemList' , 'https://zyxcl.xyz/exam_api/zh')\r\n    console.log(res.data)\r\n    renderList(res.data.items)\r\n    const proScroll = new BScroll(\"main\" , {\r\n        scrollY : true ,\r\n        scrollbar : true ,\r\n        click : true ,\r\n        probeType : 2 ,\r\n    })\r\n}\r\nasync function xl(){\r\n    const res = await axios.get('https://zyxcl.xyz/exam_api/xl')\r\n    localStorage.setItem('itemList' , 'https://zyxcl.xyz/exam_api/xl')\r\n    console.log(res.data)\r\n    renderList(res.data.items)\r\n    const proScroll = new BScroll(\"main\" , {\r\n        scrollY : true ,\r\n        scrollbar : true ,\r\n        click : true ,\r\n        probeType : 2 ,\r\n    })\r\n}\r\nasync function sx(){\r\n    const res = await axios.get('https://zyxcl.xyz/exam_api/sx')\r\n    localStorage.setItem('itemList' , 'https://zyxcl.xyz/exam_api/sx')\r\n    console.log(res.data)\r\n    renderList(res.data.items)\r\n    const proScroll = new BScroll(\"main\" , {\r\n        scrollY : true ,\r\n        scrollbar : true ,\r\n        click : true ,\r\n        probeType : 2 ,\r\n    })\r\n}\r\n\r\n// 初始\r\nzh()\r\n$(\".zh\").classList.add(\"active\")\r\n\r\n// 主页滚动\r\nconst proScroll = new BScroll(\"main\" , {\r\n    scrollY : true ,\r\n    scrollbar : true ,\r\n    click : true ,\r\n    probeType : 2 ,\r\n})\r\n\r\n\r\n// 点击事件\r\n\r\n$(\"nav\").addEventListener( \"click\",(e)=> {\r\n    if(e.target.classList.contains('zh')){\r\n        $(\".active\").classList.remove(\"active\")\r\n        e.target.classList.add(\"active\")\r\n        zh()\r\n    }\r\n    if(e.target.classList.contains('xl')){\r\n        $(\".active\").classList.remove(\"active\")\r\n        e.target.classList.add(\"active\")\r\n        xl()\r\n    }\r\n    if(e.target.classList.contains('sx')){\r\n        $(\".active\").classList.remove(\"active\")\r\n        e.target.classList.add(\"active\")\r\n        sx()\r\n    }\r\n} )\r\n// 跳转详情\r\n$(\".pros\").addEventListener( \"click\", (e) => {\r\n    if(e.target.classList.contains(\"pro\")){\r\n        localStorage.setItem('id' , JSON.stringify(e.target.getAttribute(\"data_index\")))\r\n        location.assign(\"./detail.html\")\r\n    }\r\n} )\r\n\r\n// 跳转搜索\r\n\r\n$(\".search div\").addEventListener( \"click\", (e) => {\r\n    location.assign(\"./search.html\")\r\n\r\n} )\r\n\r\n// $(\".pro\").addEventListener( \"click\", (e)=> {\r\n//     const data = {\r\n//         id :  e.target.getAttribute(\"data_index\"),\r\n//         list : $(\".active\").innerHTML\r\n//     }\r\n//     localStorage.setItem('id' , JSON.stringify(data))\r\n//     location.assign(\"./detail.html\")\r\n// })\r\n\r\n// 排序\r\n\r\nasync function renderSort(dataList,sort){\r\n    const res = await axios.get(dataList)\r\n    let sortData = res.data.items.sort(function(a,b){\r\n        return sort? a.price - b.price : b.price - a.price\r\n    })\r\n    return sortData\r\n}\r\n\r\nlet flag = 0\r\n$(\".sort\").addEventListener( \"click\" , ()=> {\r\n    console.log(flag)\r\n    if(flag === 0){\r\n        $(\".up\").classList.add(\"sortActive\")\r\n        let dataList =localStorage.getItem(\"itemList\");\r\n        renderSort(dataList,true).then(res => {\r\n            renderList(res)\r\n        })\r\n        // renderList( renderSort(dataList,true) )\r\n        flag = 1\r\n    }\r\n    else if(flag === 1){\r\n        $(\".sortActive\").classList.remove(\"sortActive\");\r\n        $(\".down\").classList.add(\"sortActive\")\r\n        let dataList =localStorage.getItem(\"itemList\");\r\n        renderSort(dataList,false).then(res => {\r\n            renderList(res)\r\n        })\r\n        // renderList( renderSort(dataList,false) )\r\n        flag = 2\r\n    }\r\n    else if(flag ===2){\r\n        $(\".sortActive\").classList.remove(\"sortActive\");\r\n        let dataList =localStorage.getItem(\"itemList\");\r\n        async function re(dataList){\r\n            const res = await axios.get(dataList)\r\n            return res.data.items\r\n        }\r\n        re(dataList).then(res => {\r\n            renderList(res)\r\n        })\r\n        flag = 0\r\n\r\n    }\r\n})\r\n\r\n// 页面布局切换\r\n$(\".layout\").addEventListener(\"click\",(e)=> {\r\n    if(e.target.classList.contains(\"net\")){\r\n        e.target.classList.remove(\"show\")\r\n        $(\".Column\").classList.add(\"show\")\r\n        $(\".pros\").classList.remove(\"layout_net\");\r\n        $(\".pros\").classList.add(\"layout_Column\");\r\n    }\r\n    else if(e.target.classList.contains(\"Column\")){\r\n        e.target.classList.remove(\"show\")\r\n        $(\".net\").classList.add(\"show\")\r\n        $(\".pros\").classList.remove(\"layout_Column\");\r\n        $(\".pros\").classList.add(\"layout_net\");\r\n    }\r\n})\r\n\r\n\r\nfunction $(el, parent) {\r\n    parent = parent || document;\r\n    return parent.querySelector(el)\r\n}\r\n\r\nfunction gets(el, parent) {\r\n    parent = parent || document;\r\n    return [...parent.querySelectorAll(el)]\r\n}\r\n\r\n\r\n"],"names":["renderList","list","$","pro","index","zh","res","axios","BScroll","xl","sx","e","renderSort","dataList","sort","a","b","flag","re","el","parent"],"mappings":"+CAOA,SAASA,EAAWC,EAAK,CACrBC,EAAE,OAAO,EAAE,UAAYD,EAAK,IAAK,CAACE,EAAIC,IAC5B;AAAA,4CAC8BA,CAAK;AAAA;AAAA,+BAElBD,EAAI,GAAG;AAAA;AAAA;AAAA,0BAGZA,EAAI,KAAK;AAAA,2CACQA,EAAI,IAAI;AAAA,4BACvBA,EAAI,KAAK;AAAA;AAAA;AAAA,SAI9B,EAAC,KAAK,EAAE,CACf,CAEA,eAAeE,GAAI,CACf,MAAMC,EAAM,MAAMC,EAAM,IAAI,+BAA+B,EAC3D,aAAa,QAAQ,WAAa,+BAA+B,EACjE,QAAQ,IAAID,EAAI,IAAI,EACpBN,EAAWM,EAAI,KAAK,KAAK,EACP,IAAIE,EAAQ,OAAS,CACnC,QAAU,GACV,UAAY,GACZ,MAAQ,GACR,UAAY,CACpB,CAAK,CACL,CACA,eAAeC,GAAI,CACf,MAAMH,EAAM,MAAMC,EAAM,IAAI,+BAA+B,EAC3D,aAAa,QAAQ,WAAa,+BAA+B,EACjE,QAAQ,IAAID,EAAI,IAAI,EACpBN,EAAWM,EAAI,KAAK,KAAK,EACP,IAAIE,EAAQ,OAAS,CACnC,QAAU,GACV,UAAY,GACZ,MAAQ,GACR,UAAY,CACpB,CAAK,CACL,CACA,eAAeE,GAAI,CACf,MAAMJ,EAAM,MAAMC,EAAM,IAAI,+BAA+B,EAC3D,aAAa,QAAQ,WAAa,+BAA+B,EACjE,QAAQ,IAAID,EAAI,IAAI,EACpBN,EAAWM,EAAI,KAAK,KAAK,EACP,IAAIE,EAAQ,OAAS,CACnC,QAAU,GACV,UAAY,GACZ,MAAQ,GACR,UAAY,CACpB,CAAK,CACL,CAGAH,EAAI,EACJH,EAAE,KAAK,EAAE,UAAU,IAAI,QAAQ,EAGb,IAAIM,EAAQ,OAAS,CACnC,QAAU,GACV,UAAY,GACZ,MAAQ,GACR,UAAY,CAChB,CAAC,EAKDN,EAAE,KAAK,EAAE,iBAAkB,QAASS,GAAK,CAClCA,EAAE,OAAO,UAAU,SAAS,IAAI,IAC/BT,EAAE,SAAS,EAAE,UAAU,OAAO,QAAQ,EACtCS,EAAE,OAAO,UAAU,IAAI,QAAQ,EAC/BN,EAAI,GAELM,EAAE,OAAO,UAAU,SAAS,IAAI,IAC/BT,EAAE,SAAS,EAAE,UAAU,OAAO,QAAQ,EACtCS,EAAE,OAAO,UAAU,IAAI,QAAQ,EAC/BF,EAAI,GAELE,EAAE,OAAO,UAAU,SAAS,IAAI,IAC/BT,EAAE,SAAS,EAAE,UAAU,OAAO,QAAQ,EACtCS,EAAE,OAAO,UAAU,IAAI,QAAQ,EAC/BD,EAAI,EAEZ,CAAG,EAEHR,EAAE,OAAO,EAAE,iBAAkB,QAAUS,GAAM,CACtCA,EAAE,OAAO,UAAU,SAAS,KAAK,IAChC,aAAa,QAAQ,KAAO,KAAK,UAAUA,EAAE,OAAO,aAAa,YAAY,CAAC,CAAC,EAC/E,SAAS,OAAO,eAAe,EAEvC,CAAG,EAIHT,EAAE,aAAa,EAAE,iBAAkB,QAAUS,GAAM,CAC/C,SAAS,OAAO,eAAe,CAEnC,CAAG,EAaH,eAAeC,EAAWC,EAASC,EAAK,CAKpC,OAJY,MAAMP,EAAM,IAAIM,CAAQ,GACjB,KAAK,MAAM,KAAK,SAASE,EAAEC,EAAE,CAC5C,OAAOF,EAAMC,EAAE,MAAQC,EAAE,MAAQA,EAAE,MAAQD,EAAE,KACrD,CAAK,CAEL,CAEA,IAAIE,EAAO,EACXf,EAAE,OAAO,EAAE,iBAAkB,QAAU,IAAK,CAExC,GADA,QAAQ,IAAIe,CAAI,EACbA,IAAS,EAAE,CACVf,EAAE,KAAK,EAAE,UAAU,IAAI,YAAY,EACnC,IAAIW,EAAU,aAAa,QAAQ,UAAU,EAC7CD,EAAWC,EAAS,EAAI,EAAE,KAAKP,GAAO,CAClCN,EAAWM,CAAG,CAC1B,CAAS,EAEDW,EAAO,CACV,SACOA,IAAS,EAAE,CACff,EAAE,aAAa,EAAE,UAAU,OAAO,YAAY,EAC9CA,EAAE,OAAO,EAAE,UAAU,IAAI,YAAY,EACrC,IAAIW,EAAU,aAAa,QAAQ,UAAU,EAC7CD,EAAWC,EAAS,EAAK,EAAE,KAAKP,GAAO,CACnCN,EAAWM,CAAG,CAC1B,CAAS,EAEDW,EAAO,CACV,SACOA,IAAQ,EAAE,CACdf,EAAE,aAAa,EAAE,UAAU,OAAO,YAAY,EAC9C,IAAIW,EAAU,aAAa,QAAQ,UAAU,EAC7C,eAAeK,EAAGL,EAAS,CAEvB,OADY,MAAMN,EAAM,IAAIM,CAAQ,GACzB,KAAK,KACnB,CACDK,EAAGL,CAAQ,EAAE,KAAKP,GAAO,CACrBN,EAAWM,CAAG,CAC1B,CAAS,EACDW,EAAO,CAEV,CACL,CAAC,EAGDf,EAAE,SAAS,EAAE,iBAAiB,QAASS,GAAK,CACrCA,EAAE,OAAO,UAAU,SAAS,KAAK,GAChCA,EAAE,OAAO,UAAU,OAAO,MAAM,EAChCT,EAAE,SAAS,EAAE,UAAU,IAAI,MAAM,EACjCA,EAAE,OAAO,EAAE,UAAU,OAAO,YAAY,EACxCA,EAAE,OAAO,EAAE,UAAU,IAAI,eAAe,GAEpCS,EAAE,OAAO,UAAU,SAAS,QAAQ,IACxCA,EAAE,OAAO,UAAU,OAAO,MAAM,EAChCT,EAAE,MAAM,EAAE,UAAU,IAAI,MAAM,EAC9BA,EAAE,OAAO,EAAE,UAAU,OAAO,eAAe,EAC3CA,EAAE,OAAO,EAAE,UAAU,IAAI,YAAY,EAE7C,CAAC,EAGD,SAASA,EAAEiB,EAAIC,EAAQ,CACnB,OAAAA,EAASA,GAAU,SACZA,EAAO,cAAcD,CAAE,CAClC"}